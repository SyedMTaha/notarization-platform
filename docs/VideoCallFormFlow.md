# Video Call Form Collaboration - Visual Flow

## ğŸ¥ Video Call Interface Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            WiScribble - Video Verification                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                     â”‚  â”‚      Form Panel (Toggleable)   â”‚  â”‚
â”‚  â”‚         Video Call Area             â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚      (Zego Cloud Integration)       â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                                     â”‚  â”‚  â”‚ âœ… Live Collaboration      â”‚ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚    Active                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”‚    User     â”‚  â”‚   Notary    â”‚   â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚  â”‚   Camera    â”‚  â”‚   Camera    â”‚   â”‚  â”‚  Active Participants:           â”‚  â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚   â”‚  â”‚  â€¢ ğŸŸ¢ Client                    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â€¢ ğŸ”µ Notary                    â”‚  â”‚
â”‚  â”‚                                     â”‚  â”‚                                 â”‚  â”‚
â”‚  â”‚   ğŸ¤ ğŸ¥ ğŸ“ âš™ï¸ Call Controls        â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                 â”‚  â”‚
â”‚                                           â”‚  ğŸ“‹ Principal Information       â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚         ğŸ“„ Show Form                â”‚  â”‚  â”‚ Full Legal Name: John Doe   â”‚ â”‚  â”‚
â”‚  â”‚         ğŸ‘ï¸ Hide Form                â”‚  â”‚  â”‚ [User is typing...]         â”‚ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                                           â”‚                                 â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  ğŸ“‹ Agent Information          â”‚  â”‚
â”‚  â”‚            Navigation               â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â¬…ï¸ Back          Next â¡ï¸            â”‚  â”‚  â”‚ Agent Name: Jane Smith      â”‚ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ Powers: â˜‘ï¸ Financial        â”‚ â”‚  â”‚
â”‚                                           â”‚  â”‚         â˜‘ï¸ Healthcare       â”‚ â”‚  â”‚
â”‚                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                                           â”‚                                 â”‚  â”‚
â”‚                                           â”‚  ğŸ“ Signatures                  â”‚  â”‚
â”‚                                           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚                                           â”‚  â”‚ Principal: [Signature Pad] â”‚ â”‚  â”‚
â”‚                                           â”‚  â”‚ Notary: [Signature Pad]    â”‚ â”‚  â”‚
â”‚                                           â”‚  â”‚ (Only notary can edit)      â”‚ â”‚  â”‚
â”‚                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Real-Time Synchronization Flow

### **Scenario: User typing "John Doe" in Principal Name field**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER     â”‚     â”‚  SYSTEM     â”‚     â”‚   SYNC      â”‚     â”‚   NOTARY    â”‚
â”‚   CLIENT    â”‚     â”‚ (Browser)   â”‚     â”‚  SERVICE    â”‚     â”‚   CLIENT    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚ 1. Types "J"       â”‚                    â”‚                    â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚                    â”‚
       â”‚                    â”‚ 2. Update local    â”‚                    â”‚
       â”‚                    â”‚    WorkflowContext â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚                    â”‚ 3. Debounce 500ms  â”‚                    â”‚
       â”‚                    â”‚    (user keeps     â”‚                    â”‚
       â”‚                    â”‚     typing...)     â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚ 4. Types "John"    â”‚                    â”‚                    â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚                    â”‚
       â”‚                    â”‚ 5. Update local    â”‚                    â”‚
       â”‚                    â”‚    state again     â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚                    â”‚ 6. Send to sync    â”‚                    â”‚
       â”‚                    â”‚    service         â”‚                    â”‚
       â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                    â”‚
       â”‚                    â”‚                    â”‚ 7. Broadcast to    â”‚
       â”‚                    â”‚                    â”‚    other clients   â”‚
       â”‚                    â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                    â”‚                    â”‚                    â”‚ 8. Receive update
       â”‚                    â”‚                    â”‚                    â”‚    Update UI
       â”‚                    â”‚                    â”‚                    â”‚    Show notification
       â”‚                    â”‚                    â”‚ 9. Confirmation    â”‚
       â”‚                    â”‚ 10. Success        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ 11. Notification   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                    â”‚
       â”‚ "Notary sees       â”‚                    â”‚                    â”‚
       â”‚  your changes"     â”‚                    â”‚                    â”‚
```

## ğŸ” Field Permission Matrix

### **Power of Attorney Example - Field Access Control**

| Field Name | Field Type | User Can Edit | Notary Can Edit | Notes |
|------------|------------|---------------|-----------------|-------|
| `principal_name` | text | âœ… | âŒ | User enters their own name |
| `principal_address` | textarea | âœ… | âŒ | User enters their address |
| `principal_dob` | date | âœ… | âŒ | User enters birth date |
| `agent_name` | text | âœ… | âŒ | User selects their agent |
| `powers_granted` | checkbox | âœ… | âŒ | User chooses powers |
| `principal_signature` | signature | âœ… | âŒ | User signs electronically |
| `notary_signature` | signature | âŒ | âœ… | Only notary can sign |
| `notary_seal` | signature | âŒ | âœ… | Notary official seal |
| `verification_date` | date | âŒ | âœ… | Notary sets date |
| `notary_commission` | text | âŒ | âœ… | Notary commission # |
| `witness_signature` | signature | âœ… | âœ… | Either party can witness |

### **Configuration in documentTypes.js:**
```javascript
POWER_OF_ATTORNEY: {
  // ... other config
  notaryEditableFields: [
    'notary_signature',
    'notary_seal',
    'verification_date',
    'notary_commission'
  ],
  signatureFields: [
    'principal_signature',
    'notary_signature',
    'witness_signature'
  ]
}
```

## ğŸ“± Responsive Behavior

### **Desktop View (1200px+)**
```
[Video Call 70%] [Form Panel 30%]
```

### **Tablet View (768px-1199px)**
```
[Video Call 100%]
[Toggle Button: Show/Hide Form]
[Form Panel: Overlay Modal]
```

### **Mobile View (<768px)**
```
[Video Call: Full Screen]
[Form: Bottom Sheet/Modal]
```

## ğŸš€ Real-Time Events During Video Call

### **Form Update Events**
```javascript
// User types in field
{
  type: 'form_update',
  fieldId: 'principal_name',
  newValue: 'John Doe',
  userId: 'user_123',
  userRole: 'client',
  timestamp: 1703123456789
}

// Signature added
{
  type: 'signature_update',
  fieldId: 'notary_signature',
  signature: 'data:image/png;base64,iVBOR...',
  signedBy: 'notary_456',
  timestamp: 1703123456790
}

// User joins/leaves
{
  type: 'user_joined',
  userId: 'notary_456',
  userRole: 'notary',
  timestamp: 1703123456791
}
```

### **UI Notifications**
- ğŸŸ¢ "Notary joined the session"
- ğŸ”„ "Notary updated the form"
- âœï¸ "Notary added signature"
- âš ï¸ "Connection lost, attempting to reconnect..."
- âœ… "All signatures completed"

## ğŸ”„ State Synchronization

### **Data Sources Priority:**
1. **User Input** - Immediate local update
2. **Real-time Sync** - Propagate to other users
3. **Firestore** (if implemented) - Persistent storage
4. **localStorage** - Browser backup

### **Conflict Resolution:**
- **Last Write Wins** - Most recent timestamp takes precedence
- **User Role Priority** - Notary edits override user edits for notary fields
- **Field Locking** - Prevent simultaneous edits of signature fields

## ğŸ“Š Performance Considerations

### **Optimization Strategies:**
- **Debounced Updates** - 500ms delay before sync
- **Field-Level Sync** - Only sync changed fields
- **Connection Pooling** - Reuse WebSocket connections
- **Lazy Loading** - Load form sections on demand
- **Offline Support** - Queue updates when disconnected

### **Error Handling:**
- **Auto Retry** - Up to 5 attempts with exponential backoff
- **Graceful Degradation** - Continue without real-time if sync fails
- **Data Recovery** - Restore from localStorage on reconnect
- **User Notifications** - Clear status messages for all states

This system provides seamless real-time collaboration between users and notaries during video calls, with clear permission boundaries and robust error handling.
